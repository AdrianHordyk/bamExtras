library(bamExtras)
usethis::use_vignette("intro")
source("~/GitHub/myPackages/bamExtras/update.package.bamExtras.r", echo=TRUE)
setwd("~/GitHub/myPackages/bamExtras")
source("~/GitHub/myPackages/bamExtras/update.package.bamExtras.r", echo=TRUE)
library(bamExtras)
getwd()
library(bamExtras)
vignette(package="bamExtras")
vignette(package="fishLife")
library(FishLife)
vignette(package="FishLife")
library(bamExtras)
vignette(package="bamExtras")
library(bamExtras)
vignette(package="bamExtras")
browseVignette(package="bamExtras")
browseVignettes(package="bamExtras")
dir.create("inst/doc")
file.copy(dir("vignettes", full.names=TRUE), "inst/doc", overwrite=TRUE)
getwd()
?bam_to_r
bamStockMisc
library(bamExtras)
tmp <- bam_to_r(dat.obj=dat_BlackSeaBass,tpl.obj=tpl_BlackSeaBass,cxx.obj=cxx_BlackSeaBass)
bam_BlackSeaBass <- bam_to_r(dat.obj=dat_BlackSeaBass,tpl.obj=tpl_BlackSeaBass,cxx.obj=cxx_BlackSeaBass)
bam_RedPorgy <- bam_to_r(dat.obj=dat_RedPorgy,tpl.obj=tpl_RedPorgy,cxx.obj=cxx_RedPorgy)
bam_AtlanticMenhaden <- bam_to_r(dat.obj=dat_AtlanticMenhaden,tpl.obj=tpl_AtlanticMenhaden,cxx.obj=cxx_AtlanticMenhaden)
bam_AtlanticMenhaden$L.init$styr
bam_AtlanticMenhaden$L.init$set_q_rate
bam_AtlanticMenhaden$L.dat
bam_BluelineTilefish <- bam_to_r(dat.obj=dat_BluelineTilefish,tpl.obj=tpl_BluelineTilefish,cxx.obj=cxx_BluelineTilefish)
bam_BluelineTilefish$L.init$nages
bam_BluelineTilefish$L.init$obs_cH_cpue
library(bamExtras)
bam_AtlanticMenhaden <- bam_to_r(CommonName=AtlanticMenhaden)
bam_AtlanticMenhaden <- bam_to_r(CommonName="AtlanticMenhaden")
library(bamExtras)
bam_AtlanticMenhaden <- bam_to_r(CommonName="AtlanticMenhaden")
library(bamExtras)
library(bamExtras)
bam_GagG <- bam_to_r("GagGrouper")
bam_Cobi <- bam_to_r("Cobia")
bam_GrTr <- bam_to_r("GrayTriggerfish")
bam_ReGr <- bam_to_r("RedGrouper")
bam_ReSn <- bam_to_r("RedSnapper")
bam_SnGr <- bam_to_r("SnowyGrouper")
bam_Tile <- bam_to_r("Tilefish")
bam_VeSn <- bam_to_r("VermilionSnapper")
cleanup=list(del="*.r0*","*.p0*","*.b0*","*.log","*.rpt","*.obj",
"*.htp","*.eva","*.bar","*.tds","*.o","tmp_admb",
"variance","*.dep","*.hes","*.tmp")
cleanup
cleanup=list(del=c("*.r0*","*.p0*","*.b0*","*.log","*.rpt","*.obj",
"*.htp","*.eva","*.bar","*.tds","*.o","tmp_admb",
"variance","*.dep","*.hes","*.tmp")))
cleanup=list(del=c("*.r0*","*.p0*","*.b0*","*.log","*.rpt","*.obj",
"*.htp","*.eva","*.bar","*.tds","*.o","tmp_admb",
"variance","*.dep","*.hes","*.tmp"))
cleanup
lapply(cleanup,function(x){})
lapply(1:length(cleanup),function(x){
xname <- names(cleanup)[x]
xx <- cleanup[[x]]
paste(xname,xx)
})
?shell
library(bamExtras)
library(bamExtras)
run_bam("BlackSeaBass")
library(bamExtras)
run_bam("BlackSeaBass")
cleanup_bat
lapply(1:length(cleanup),function(x){
xname <- names(cleanup)[x]
xx <- cleanup[[x]]
paste(xname,xx)
})
sapply(1:length(cleanup),function(x){
xname <- names(cleanup)[x]
xx <- cleanup[[x]]
paste(xname,xx)
})
unlist(lapply(1:length(cleanup),function(x){
xname <- names(cleanup)[x]
xx <- cleanup[[x]]
paste(xname,xx)
}))
source("~/GitHub/myPackages/bamExtras/R/run_bam.R", echo=TRUE)
run_bam("BlackSeaBass")
library(bamExtras)
head(admb2r.cpp)
run_bam("BlackSeaBass")
getwd)
getwd()
setwd("~/GitHub/myPackages/bamExtras/testing")
library(bamExtras)
run_bam("BlackSeaBass")
source("~/GitHub/myPackages/bamExtras/R/run_bam.R", echo=TRUE)
getwd()
run_bam("BlackSeaBass")
run_bam("BluelineTilefish")
run_bam("AtlanticMenhaden")
run_bam("Cobia")
run_bam("GagGrouper")
run_bam("GrayTriggerfish")
run_bam("GreaterAmberjack")
run_bam("RedGrouper")
run_bam("RedPorgy")
run_bam("RedSnapper")
run_bam("SnowyGrouper")
run_bam("Tilefish")
run_bam("VermilionSnapper")
library(bamExtras)
getwd()
run_bam("VermilionSnapper")
bam_RePo <- bam_to_r("RedPorgy")
bam_RePo$L.init$set_steep
bam_RePo2 <- bam_RePo
bam_RePo2$L.init$set_steep
bam_RePo2$L.init$set_steep[c(1,5)]
bam_RePo2$L.init$set_steep[c(1,5)] <- paste(0.84)
bam_RePo2$L.init$set_steep[c(1,5)] <- paste(1.5*bam_RePo2$L.init$set_steep[c(1,5)])
bam_RePo2$L.init$set_steep[c(1,5)] <- paste(0.6)
bam_RePo2$L.init$set_steep[c(1,5)]
?type.convert
library(bamExtras)
library(bamExtras)
?bam_to_r
bam_RePo <- bam_to_r("RedPorgy")
library(bamExtras)
bam_RePo <- bam_to_r("RedPorgy")
# Get BAM files (as character vectors from bam_to_r output)
dat_RePo <- bam_RePo$dat
tpl_RePo <- bam_RePo$tpl
cxx_RePo <- bam_RePo$cxx
# Modify data input from a BAM model and incorporate it back into the dat file object
L_init_mod <- bam_RePo
L_init_mod$set_steep[c(1,5)] <- paste(0.6)
bam_RePo_mod <- bam_to_r("RedPorgy",L_init_user=L_init_mod)
run_bam(filename="RedPorgy",dat_obj=bam_RePo_mod$dat,tpl_obj=bam_RePo_mod$tpl,cxx_obj=bam_RePo_mod$cxx)
run_bam(fileName="RedPorgy",dat_obj=bam_RePo_mod$dat,tpl_obj=bam_RePo_mod$tpl,cxx_obj=bam_RePo_mod$cxx)
View(run_bam())
View(run_bam
)
run_bam(fileName="RedPorgy")
class(bam_RePo_mod$dat)
str(bam_RePo_mod$dat)
run_bam("RedPorgy")
run_bam(fileName="RedPorgy", dat_obj=bam_RePo_mod$dat, tpl_obj=bam_RePo_mod$tpl, cxx_obj=bam_RePo_mod$cxx)
fileName="RedPorgy"; dat_obj=bam_RePo_mod$dat; tpl_obj=bam_RePo_mod$tpl; cxx_obj=bam_RePo_mod$cxx
run_bam
library(bamExtras)
run_bam
library(bamExtras)
library(bamExtras)
bam_to_r
run_bam
library(bamExtras)
run_bam
library(bamExtras)
?bam_to_r
bam_RePo <- bam_to_r("RedPorgy")
run_bam(bam_RePo)
CommonName = NULL; fileName = NULL; dir_bam = NULL;
dat_file=NULL;tpl_file=NULL;cxx_file=NULL;
dat_obj=NULL; tpl_obj=NULL;cxx_obj=NULL
bam <- bam_RePo
dat
tpl
cxx
wd <- getwd()
if(is.null(fileName)&!is.null(CommonName)){
fileName <- CommonName
dat <- get(paste0("dat_",CommonName))
tpl <- get(paste0("tpl_",CommonName))
cxx <- get(paste0("cxx_",CommonName))
}
cxx
if(!is.null(bam)){
dat <- bam$dat
tpl <- bam$tpl
cxx <- bam$cxx
}
cxx
(!is.null(dat_obj)&!is.null(tpl_obj)&!is.null(cxx_obj))
(!is.null(dat_file)&!is.null(tpl_file)&!is.null(cxx_file))
if(!is.null(dat_obj)&!is.null(tpl_obj)&!is.null(cxx_obj)){
dat <- dat_obj
tpl <- tpl_obj
cxx <- cxx_obj
}
# Read in dat, tpl, and cxx files
if(!is.null(dat_file)&!is.null(tpl_file)&!is.null(cxx_file)){
dat <- readLines(con=dat_file)
tpl <- readLines(con=tpl_file)
cxx <- readLines(con=cxx_file)
}
paste0("bam_",fileName)
bam
fileName
str(dat)
paste("bam",NULL)
ifelse(fileName=="bam",
fileName,
paste0("bam_",fileName)
)
fileName <- "bam"
ifelse(fileName=="bam",
fileName,
paste0("bam_",fileName)
)
fileName <- "RedPorgy"
ifelse(fileName=="bam",
fileName,
paste0("bam_",fileName)
)
source("~/GitHub/myPackages/bamExtras/R/run_bam.R", echo=TRUE)
bam_RePo <- bam_to_r("RedPorgy")
run_bam(bam=bam_RePo)
?message
source("~/GitHub/myPackages/bamExtras/R/run_bam.R", echo=TRUE)
run_bam(bam=bam_RePo)
source("~/GitHub/myPackages/bamExtras/R/run_bam.R", echo=TRUE)
run_bam(bam=bam_RePo)
source("~/GitHub/myPackages/bamExtras/R/run_bam.R", echo=TRUE)
spp <- run_bam(bam=bam_RePo)
L_init2 <- bam_RePo$L_init
L_init2$set_steep[c(1,5)] <- paste(0.6)
bam_RePo2 <- bam_to_r("RedPorgy",L_init_user=L_init2)
rdat_RePo2 <- run_bam(bam=bam_RePo2)
L_init2$set_steep
rdat_RePo <- run_bam(bam=bam_RePo)
rdat_RePo$t.series$SSB.msst
rdat_RePo$t.series$year
plot(rdat_RePo$t.series$year,rdat_RePo$t.series$SSB.msst,type="o")
points(rdat_RePo2$t.series$year,rdat_RePo2$t.series$SSB.msst,type="o",col="blue")
L_init2$set_steep
L_init2$set_steep[4]
as.numeric(L_init2$set_steep[4])
abs(as.numeric(L_init2$set_steep[4]))
-abs(as.numeric(L_init2$set_steep[4]))
paste(-abs(as.numeric(L_init2$set_steep[4])))
library(bamExtras)
?bam_to_r
bam_RePo <- bam_to_r("RedPorgy")
# Run a bam model and assign rdat output to object
rdat_RePo <- run_bam(bam=bam_RePo,filename="bam_RePo")
# Modify data input from a BAM model and incorporate it back into the dat file object
L_init2 <- bam_RePo$L_init
L_init2$set_steep[c(1,5)] <- paste(0.6) # Change steepness
L_init2$set_steep[4] <- paste(-abs(as.numeric(L_init2$set_steep[4]))) # Fix steepness
bam_RePo2 <- bam_to_r("RedPorgy",L_init_user=L_init2)
rdat_RePo2 <- run_bam(bam=bam_RePo2,filename="bam_RePo2")
library(bamExtras)
bam_RePo <- bam_to_r("RedPorgy")
?bam_to_r
# Run a bam model and assign rdat output to object
rdat_RePo <- run_bam(bam=bam_RePo,fileName="bam_RePo")
# Modify data input from a BAM model and incorporate it back into the dat file object
L_init2 <- bam_RePo$L_init
L_init2$set_steep[c(1,5)] <- paste(0.6) # Change steepness
L_init2$set_steep[4] <- paste(-abs(as.numeric(L_init2$set_steep[4]))) # Fix steepness
bam_RePo2 <- bam_to_r("RedPorgy",L_init_user=L_init2)
rdat_RePo2 <- run_bam(bam=bam_RePo2,fileName="bam_RePo2")
# Compare models
plot(rdat_RePo$t.series$year,rdat_RePo$t.series$SSB.msst,type="o")
points(rdat_RePo2$t.series$year,rdat_RePo2$t.series$SSB.msst,type="o",col="blue")
plot(rdat_RePo$t.series$year,rdat_RePo$t.series$SSB.msst,type="o",ylim=range(c(rdat_RePo$t.series$SSB.msst,rdat_RePo2$t.series$SSB.msst))
plot(rdat_RePo$t.series$year,rdat_RePo$t.series$SSB.msst,type="o",ylim=range(c(rdat_RePo$t.series$SSB.msst,rdat_RePo2$t.series$SSB.msst)))
plot(rdat_RePo$t.series$year,rdat_RePo$t.series$SSB.msst,type="o",ylim=range(c(rdat_RePo$t.series$SSB.msst,rdat_RePo2$t.series$SSB.msst)))
plot(rdat_RePo$t.series$year,rdat_RePo$t.series$SSB.msst,type="o",ylim=range(c(rdat_RePo$t.series$SSB.msst,rdat_RePo2$t.series$SSB.msst),na.rm=TRUE))
points(rdat_RePo2$t.series$year,rdat_RePo2$t.series$SSB.msst,type="o",col="blue")
legend("topright",legend=c("RePo","RePo2),pch=1,lty=1,col=c("black","blue"),bty="n")
legend("topright",legend=c("RePo","RePo2"),pch=1,lty=1,col=c("black","blue"),bty="n")
library(bamExtras)
?bam_to_r
library(bamExtras)
?bam_to_r
plot(rdat_RePo$t.series$year, rdat_RePo$t.series$SSB.msst,type="o", ylim=range(c(rdat_RePo$t.series$SSB.msst,rdat_RePo2$t.series$SSB.msst),na.rm=TRUE), xlab="year",ylab="SSB.msst")
plot(rdat_RePo$t.series$year, rdat_RePo$t.series$SSB.msst,type="o", ylim=range(c(rdat_RePo$t.series$SSB.msst,rdat_RePo2$t.series$SSB.msst),na.rm=TRUE), xlab="year",ylab="SSB.msst")
points(rdat_RePo2$t.series$year,rdat_RePo2$t.series$SSB.msst,type="o",col="blue")
legend("topright",legend=c("RePo","RePo2),pch=1,lty=1,col=c("black","blue"),bty="n")
library(bamExtras)
?bam_to_r
bam_AtMe <- bam_to_r("AtlanticMenhaden")
bam_BlSB <- bam_to_r("BlackSeaBass")
bam_BlTi <- bam_to_r("BluelineTilefish")
bam_Cobi <- bam_to_r("Cobia")
bam_GagG <- bam_to_r("GagGrouper")
bam_GrTr <- bam_to_r("GrayTriggerfish")
bam_GrAm <- bam_to_r("GreaterAmberjack")
bam_ReGr <- bam_to_r("RedGrouper")
bam_RePo <- bam_to_r("RedPorgy")
bam_ReSn <- bam_to_r("RedSnapper")
bam_SnGr <- bam_to_r("SnowyGrouper")
bam_Tile <- bam_to_r("Tilefish")
bam_VeSn <- bam_to_r("VermilionSnapper")
# Run a bam model and assign rdat output to object
rdat_RePo <- run_bam(bam=bam_RePo,fileName="bam_RePo")
# Modify data input from a BAM model and incorporate it back into the dat file object
L_init2 <- bam_RePo$L_init
L_init2$set_steep[c(1,5)] <- paste(0.6) # Change steepness
L_init2$set_steep[4] <- paste(-abs(as.numeric(L_init2$set_steep[4]))) # Fix steepness
bam_RePo2 <- bam_to_r("RedPorgy",L_init_user=L_init2)
rdat_RePo2 <- run_bam(bam=bam_RePo2,fileName="bam_RePo2")
# Compare models
plot(rdat_RePo$t.series$year, rdat_RePo$t.series$SSB.msst,type="o", ylim=range(c(rdat_RePo$t.series$SSB.msst,rdat_RePo2$t.series$SSB.msst),na.rm=TRUE), xlab="year",ylab="SSB.msst")
points(rdat_RePo2$t.series$year,rdat_RePo2$t.series$SSB.msst,type="o",col="blue")
legend("topright",legend=c("RePo","RePo2"),pch=1,lty=1,col=c("black","blue"),bty="n")
library(bamExtras)
library(bamExtras)
library(bamExtras)
bam_to_r
library(bamExtras)
bam_to_r
bam2r()
bam2r
library(bamExtras)
